@page "/eisodsdview"
@using DataHub.Core.Components.Shared
@using DataHub.Core.Models.UI
@using DataHub.Core.Models.DataGrid
@using Eisod.Shared.Models
@using Microsoft.FluentUI.AspNetCore.Components

<PageTitle>EISOD SD View</PageTitle>

<h1>EISOD SD View</h1>

<div class="filter-controls">
    <button class="btn btn-primary" @onclick="ToggleQueryBuilder">Advanced Filter</button>
</div>

<FloatingQueryBuilder TItem="ViewEisodSdUIModel"
                      @bind-Visible="_isQueryBuilderVisible"
                      AvailableColumns="_queryBuilderColumns"
                      OnApply="HandleQueryApplied"
                      OnClear="HandleQueryClear"
                      OnSave="HandleSaveQuery"
                      OnDelete="HandleDeleteQuery"
                      SavedQueries="_savedQueries" />

<GenericDataView @ref="_dataView" TItem="ViewEisodSdUIModel"
                 DataProvider="@((DataRequestBase request) => LoadData(request))"
                 ColumnDefinitions="@_columnDefinitions"
                 ExportFunction="@ExportEisodSdsToExcel"
                 ExportFileName="EisodSds"
                 ShowCheckboxes="true"
                 SelectedItems="_selectedItems"
                 SelectedItemsChanged="@((HashSet<ViewEisodSdUIModel> items) => _selectedItems = items)">
    <ActionColumnTemplate>
        <FluentButton IconStart="@(new Microsoft.FluentUI.AspNetCore.Components.Icons.Regular.Size20.Search())" Title="View Details" OnClick="@(() => ViewItemDetails(context.Id))" />
    </ActionColumnTemplate>
</GenericDataView>
